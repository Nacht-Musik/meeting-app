#meeting-page.card
  = form_for meeting, remote: true, html: {"data-persist" => "garlic", class: "garlic-auto-save"} do |f|
    .card-header
      %h5= f.label '会議名'
      = f.text_field :title, class: 'form-control'
    .card-body
      #date-time-area
        .row
          .col-6
            = f.label '開催日'
          .col-3
            = f.label '開始時刻'
          .col-3
            = f.label '終了時刻'
        .row
          .col-6
            -#= f.date_field :date, class: 'form-control'
            #date-picker.input-group.date{"data-target-input": "nearest"}
              = f.date_field :date, class: 'form-control datetimepicker-input',
                              "data-target": "#date-picker", "data-type": "date"
              .input-group-append{"data-target": "#date-picker", "data-toggle": "datetimepicker"}
                .input-group-text
                  %i.far.fa-calendar-alt
          .col-3
            -#= f.time_field :start_time, class: 'form-control'
            #start-time-picker.input-group.date{"data-target-input": "nearest"}
              = f.time_field :start_time, class: "form-control datetimepicker-input",
                              "data-target": "#start-time-picker", "data-type": "text",
                              step: 300
              .input-group-append{"data-target": "#start-time-picker", "data-toggle": "datetimepicker"}
                .input-group-text
                  %i.far.fa-clock
          .col-3
            -#= f.time_field :finish_time, class: 'form-control', step: "300"
            #finish-time-picker.input-group.date{"data-target-input": "nearest"}
              = f.time_field :finish_time, class: "form-control datetimepicker-input",
                              "data-target": "#finish-time-picker", "data-type": "text",
                              step: 300
              .input-group-append{"data-target": "#finish-time-picker", "data-toggle": "datetimepicker"}
                .input-group-text
                  %i.fas.fa-clock
      #general-area
        .row
          .col-6
            = f.label '場所'
            = f.text_field :place, class: 'form-control'
          .col-6
            = f.label 'プロジェクト'
            = f.collection_select :project_id, projects, :id, :name, {prompt: ""},
              {class: 'custom-select'}

      #users-area
        = render partial: 'meetings/users_form', locals: {f: f, users: users}

      #attendees-area.card
        = render partial: 'meetings/attendees_form', locals: {f: f, users: users}

      %br
      #main-area.card
        .card-header
          本文 (Topics)
          %a.card-toggle-btn.btn.float-right
            = icon('fas', 'toggle-on')
        #topic-area.card-body
          = f.fields_for :topics do |topic|
            = render partial: 'meetings/topic_card', locals: {f: topic}
          = link_to_add_fields "Topic追加", f, :topics, "topic-add-btn btn btn-outline-secondary"

      %br
      #other-area
        .card
          .card-header
            = f.label '備考'
            %a.card-toggle-btn.btn.float-right
              = icon('fas', 'toggle-on')
          .card-body
            = f.text_area :note, class: 'form-control'

      %br
      = f.submit class: 'btn btn-primary', id: 'meeting-submit-btn'

  #user-block-template.user-block
    %input{type: "hidden", id: "meeting_item_name_number__destroy", value: "false", name: "meeting[item_name][number][_destroy]", class: "user-block-_destroy"}
    %input{type: "hidden", id: "meeting_item_name_number_user_id", value: "", name: "meeting[item_name][number][user_id]", class: "user-block-user_id"}
    .card.user-card.float-left
      .card-body
        = render partial: 'meetings/user_card', locals: {user_name: "template_name"}

:javascript
  changeStateAllCommentMoveBtn();
  initializationAttendeeSelector();
  $(function () {
    $('#date-picker').datetimepicker({
      format: 'YYYY-MM-DD',
    });

    $('#start-time-picker').datetimepicker({
      format: 'HH:mm',
      stepping: 5,
      defaultDate: moment('10:00', 'HH:mm'),
    });
    $('#finish-time-picker').datetimepicker({
      format: 'HH:mm',
      stepping: 5,
      defaultDate: moment('11:00', 'HH:mm'),
    });
  });
